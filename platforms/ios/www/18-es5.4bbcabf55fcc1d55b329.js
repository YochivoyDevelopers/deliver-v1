function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,_toPropertyKey(o.key),o)}}function _createClass(t,n,e){return n&&_defineProperties(t.prototype,n),e&&_defineProperties(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var n=_toPrimitive(t,"string");return"symbol"==typeof n?n:n+""}function _toPrimitive(t,n){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,n||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{F4UR:function(t,n,e){"use strict";e.r(n),e.d(n,"LoginPageModule",(function(){return _}));var o=e("ofXK"),i=e("3Pt+"),a=e("TEn/"),r=e("tyNb"),l=e("PSD3"),c=e.n(l),s=e("fXoL"),g=e("H+bZ"),d=e("2Rin"),u=e("sYmb"),b=e("wljF");function p(t,n){1&t&&(s.Ob(0,"span"),s.pc(1),s.Zb(2,"translate"),s.Nb()),2&t&&(s.Ab(1),s.rc(" ",s.ac(2,1,"Log In"),""))}function m(t,n){1&t&&s.Mb(0,"ion-spinner",21)}var f,h,C,v=[{path:"",component:(f=function(){return _createClass((function t(n,e,o,i,a,r){_classCallCheck(this,t),this.router=n,this.api=e,this.util=o,this.navCtrl=i,this.translate=a,this.oneSignal=r,this.login={email:"",password:""},this.submitted=!1,this.isLogin=!1;var l=localStorage.getItem("language");l&&null!==l||localStorage.setItem("language","spanish"),this.oneSignal.getIds().then((function(t){console.log("iddddd",t),localStorage.setItem("fcm",t.userId)})),this.translate.use(localStorage.getItem("language"))}),[{key:"ngOnInit",value:function(){}},{key:"onLogin",value:function(t){var n=this;if(console.log("form",t),this.submitted=!0,t.valid){if(!/^[\w._-]+[+]?[\w._-]+@[\w.-]+\.[a-zA-Z]{2,6}$/.test(this.login.email))return this.util.showToast(this.util.translate("Please enter valid email"),"danger","bottom"),!1;console.log("login"),this.isLogin=!0,this.api.login(this.login.email,this.login.password).then((function(t){console.log(t),t&&t.uid&&n.api.getProfile(t.uid).then((function(e){if(console.log("data",e),n.isLogin=!1,e&&"delivery"===e.type)if(e&&"active"===e.status){localStorage.setItem("uid",t.uid),localStorage.setItem("help",t.uid);var o=localStorage.getItem("lat"),i=localStorage.getItem("lng");console.log("can update");var a={lat:o,lng:i,isActive:!0};n.api.updateProfile(localStorage.getItem("uid"),a).then((function(t){console.log(t)})).catch((function(t){console.log(t)})),n.navCtrl.navigateRoot(["/tabs"])}else c.a.fire({title:n.util.translate("Error"),text:n.util.translate("Your are blocked please contact administrator"),icon:"error",showConfirmButton:!0,showCancelButton:!0,confirmButtonText:n.util.translate("Need Help?"),backdrop:!1,background:"white"}).then((function(e){e&&e.value&&(localStorage.setItem("help",t.uid),n.router.navigate(["inbox"]))}));else n.util.showToast(n.util.translate("your not valid user"),"danger","bottom")})).catch((function(t){n.isLogin=!1,console.log(t),n.util.showToast(""+t,"danger","bottom")}))})).catch((function(t){n.isLogin=!1,t&&(console.log(t),n.util.showToast(n.util.translate("Incorrect password. Verify your password"),"danger","bottom"))}))}}},{key:"resetPass",value:function(){this.router.navigate(["/forgot-password"])}},{key:"register",value:function(){this.router.navigate(["register"])}},{key:"getClassName",value:function(){return localStorage.getItem("language")}},{key:"changeLng",value:function(t){localStorage.setItem("language",t),this.translate.use(t)}}])}(),f.\u0275fac=function(t){return new(t||f)(s.Lb(r.g),s.Lb(g.a),s.Lb(d.a),s.Lb(a.G),s.Lb(u.d),s.Lb(b.a))},f.\u0275cmp=s.Fb({type:f,selectors:[["app-login"]],decls:40,vars:31,consts:[[1,"ion-padding"],[1,"formContain"],[1,"login-logo"],["src","assets/imgs/icon.png","alt","foodies",1,"logo_icon"],[1,"login-name"],[1,"subTitle"],["novalidate","",1,"formAuth"],["loginForm","ngForm"],["lines","none"],["lines","none",1,"inputsAuth"],["for","email"],["type","email","name","email","spellcheck","false","autocapitalize","off","required","",3,"ngModel","placeholder","ngModelChange"],["email","ngModel"],["color","danger"],[1,"ion-padding-start",3,"hidden"],["name","password","type","password","required","",3,"ngModel","placeholder","ngModelChange"],["password","ngModel"],[1,"frgTag",3,"click"],["type","submit","expand","block",1,"btns",2,"--border-radius","30px","--padding-top","15px","--padding-bottom","15px",3,"disabled","click"],[4,"ngIf"],["name","circles",4,"ngIf"],["name","circles"]],template:function(t,n){if(1&t){var e=s.Pb();s.Ob(0,"ion-content",0),s.Ob(1,"div",1),s.Ob(2,"div",2),s.Mb(3,"img",3),s.Ob(4,"p",4),s.pc(5),s.Zb(6,"translate"),s.Nb(),s.Ob(7,"p",5),s.pc(8),s.Zb(9,"translate"),s.Mb(10,"br"),s.pc(11),s.Zb(12,"translate"),s.Nb(),s.Nb(),s.Ob(13,"form",6,7),s.Ob(15,"ion-list",8),s.Ob(16,"ion-item",9),s.Ob(17,"label",10),s.pc(18,"Email:"),s.Nb(),s.Ob(19,"ion-input",11,12),s.Wb("ngModelChange",(function(t){return n.login.email=t})),s.Zb(21,"translate"),s.Nb(),s.Nb(),s.Ob(22,"ion-text",13),s.Ob(23,"p",14),s.pc(24),s.Zb(25,"translate"),s.Nb(),s.Nb(),s.Ob(26,"ion-item",9),s.Ob(27,"ion-input",15,16),s.Wb("ngModelChange",(function(t){return n.login.password=t})),s.Zb(29,"translate"),s.Nb(),s.Nb(),s.Ob(30,"ion-text",13),s.Ob(31,"p",14),s.pc(32),s.Zb(33,"translate"),s.Nb(),s.Nb(),s.Nb(),s.Ob(34,"p",17),s.Wb("click",(function(){return n.resetPass()})),s.pc(35),s.Zb(36,"translate"),s.Nb(),s.Ob(37,"ion-button",18),s.Wb("click",(function(){s.jc(e);var t=s.ic(14);return n.onLogin(t)})),s.oc(38,p,3,3,"span",19),s.oc(39,m,1,0,"ion-spinner",20),s.Nb(),s.Nb(),s.Nb(),s.Nb()}if(2&t){var o=s.ic(20),i=s.ic(28);s.Ab(5),s.qc(s.ac(6,15,"Login")),s.Ab(3),s.rc(" ",s.ac(9,17,"Enter your login detail to")," "),s.Ab(3),s.rc(" ",s.ac(12,19,"access your account")," "),s.Ab(8),s.dc("ngModel",n.login.email)("placeholder",s.ac(21,21,"Email")),s.Ab(4),s.dc("hidden",o.valid||0==n.submitted),s.Ab(1),s.rc(" ",s.ac(25,23,"Email is required")," "),s.Ab(3),s.dc("ngModel",n.login.password)("placeholder",s.ac(29,25,"Password")),s.Ab(4),s.dc("hidden",i.valid||0==n.submitted),s.Ab(1),s.rc(" ",s.ac(33,27,"Password is required")," "),s.Ab(3),s.rc(" ",s.ac(36,29,"Forgot Password?")," "),s.Ab(2),s.dc("disabled",n.isLogin),s.Ab(1),s.dc("ngIf",!n.isLogin),s.Ab(1),s.dc("ngIf",n.isLogin)}},directives:[a.i,i.i,i.e,i.f,a.p,a.n,a.m,a.J,i.h,i.d,i.g,a.z,a.f,o.j,a.v],pipes:[u.c],styles:[".login-logo[_ngcontent-%COMP%]{text-align:center;right:0;left:0;margin:30% auto 20px}.login-logo[_ngcontent-%COMP%]   .logo_icon[_ngcontent-%COMP%]{width:110px!important}.login-logo[_ngcontent-%COMP%]   .login-name[_ngcontent-%COMP%]{margin:0;font-size:1.5rem}.login-logo[_ngcontent-%COMP%]   .subTitle[_ngcontent-%COMP%]{font-size:1rem;margin:10px 0 0}.frgTag[_ngcontent-%COMP%]{margin-top:-10px;margin-bottom:25px;font-size:15px;text-align:right;color:var(--ion-color-primary)}.login-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:150px}.list[_ngcontent-%COMP%]{margin-bottom:0}ion-item[_ngcontent-%COMP%]{--ion-background-color:#f3f3f3;border-radius:5px!important;margin-top:10px}.formContain[_ngcontent-%COMP%], .inputsAuth[_ngcontent-%COMP%]{display:flex;flex-direction:column}.formContain[_ngcontent-%COMP%]{width:50vh;margin:0 auto;justify-content:center;align-items:center}.formAuth[_ngcontent-%COMP%]{width:100%}.formContain[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-top:1rem;color:var(--text-color2);margin-bottom:2rem}.inputsAuth[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;padding:10px;border-bottom:1px solid var(--text-color2)}.inputsAuth[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--text-color2);display:none}.formAuth[_ngcontent-%COMP%]{display:flex;width:1005;flex-direction:column;gap:1rem}.deFlexInputs[_ngcontent-%COMP%]{display:flex;border:none;padding:10px 0;gap:10px;border-bottom:1px solid var(--text-color2)}.deFlexInputs[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border:none}.deFlexInputs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background-color:transparent;color:var(--text-color2);cursor:pointer}.btns[_ngcontent-%COMP%]{padding:15px 0;border:none;border-radius:100rem!important;color:#fff;width:100%;font-size:16px;height:auto;line-height:1.5}@media (max-width:500px){.formContain[_ngcontent-%COMP%]{width:100%}}"]}),f)}],P=((h=_createClass((function t(){_classCallCheck(this,t)}))).\u0275mod=s.Jb({type:h}),h.\u0275inj=s.Ib({factory:function(t){return new(t||h)},imports:[[r.i.forChild(v)],r.i]}),h),O=e("PCNd"),_=((C=_createClass((function t(){_classCallCheck(this,t)}))).\u0275mod=s.Jb({type:C}),C.\u0275inj=s.Ib({factory:function(t){return new(t||C)},imports:[[o.b,i.a,a.D,P,O.a]]}),C)}}]);