(window.webpackJsonp=window.webpackJsonp||[]).push([[17,20,21],{PCNd:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var o=n("sYmb"),i=n("ofXK"),r=n("fXoL");let a=(()=>{class t{}return t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({factory:function(e){return new(e||t)},imports:[[i.b],o.b]}),t})()},akYc:function(t,e,n){"use strict";n.r(e),n.d(e,"TrackerPageModule",(function(){return m}));var o=n("ofXK"),i=n("3Pt+"),r=n("TEn/"),a=n("tyNb"),s=n("fXoL"),d=n("H+bZ"),l=n("S/Aq"),c=n("2Rin"),g=n("sYmb");const p=["map"],h=[{path:"",component:(()=>{class t{constructor(t,e,n,o){this.route=t,this.api=e,this.adb=n,this.util=o,this.latOri="",this.longOri="",this.latDest="",this.longDest="",this.id="",this.dName="",this.restAddress="",this.dCover="",this.phone="",this.status="",this.totalOrders=[]}ngOnInit(){this.route.queryParams.subscribe(t=>{console.log("data=>",t),t.hasOwnProperty("id")&&(this.id=t.id,this.getOrder())})}callDriver(){window.open("https://api.whatsapp.com/send?phone=91"+this.phone)}getOrder(){this.util.show(),this.api.getOrderById(this.id).then(t=>{this.util.hide(),console.log(t),t&&(this.dName=t.dId.fullname,this.dCover=t.uid.coverImage,this.dId=t.dId.uid,this.restAddress=t.address.address,this.phone=t.dId.phone,this.status=t.status,this.grandTotal=t.grandTotal,this.totalOrders=JSON.parse(t.order),console.log("my order",this.totalOrders),this.loadMap(parseFloat(t.address.lat),parseFloat(t.address.lng),parseFloat(t.vid.lat),parseFloat(t.vid.lng)))},t=>{console.log("error in orders",t),this.util.hide(),this.util.errorToast(this.util.translate("Something went wrong"))}).catch(t=>{console.log("error in order",t),this.util.hide(),this.util.errorToast(this.util.translate("Something went wrong"))})}changeMarkerPosition(t,e){var n=new google.maps.LatLng(this.driverLat,this.driverLng);e.setCenter(n),t.setPosition(n),console.log("Updating runner position")}loadMap(t,e,n,o){var i=new google.maps.DirectionsService,r=new google.maps.DirectionsRenderer;r=new google.maps.DirectionsRenderer;var a=new google.maps.LatLngBounds,s={lat:parseFloat(t),lng:parseFloat(e)},d={lat:n,lng:o},l=new google.maps.Map(this.mapElement.nativeElement,{center:{lat:t,lng:e},disableDefaultUI:!0,zoom:10});const c=new google.maps.LatLng(t,e),g=new google.maps.LatLng(n,o),p={url:"assets/icon.png",scaledSize:new google.maps.Size(50,50),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,0)};var h=new google.maps.Marker({map:l,position:c,animation:google.maps.Animation.DROP,icon:p}),_=new google.maps.Marker({map:l,position:g,animation:google.maps.Animation.DROP});h.setMap(l),_.setMap(l),r.setMap(l),r.setOptions({polylineOptions:{strokeWeight:4,strokeOpacity:1,strokeColor:"red"},suppressMarkers:!0});var b=new google.maps.Geocoder;(new google.maps.DistanceMatrixService).getDistanceMatrix({origins:[s],destinations:[d],travelMode:"DRIVING",unitSystem:google.maps.UnitSystem.METRIC,avoidHighways:!1,avoidTolls:!1},(function(t,e){if("OK"!==e)alert("Error was: "+e);else{var n=t.originAddresses,o=t.destinationAddresses,c=(document.getElementById("output"),function(t){return function(t,e){"OK"===e?l.fitBounds(a.extend(t[0].geometry.location)):alert("Geocode was not successful due to: "+e)}});i.route({origin:s,destination:d,travelMode:"DRIVING"},(function(t,e){"OK"===e?r.setDirections(t):window.alert("Directions request failed due to "+e)}));for(var g=0;g<n.length;g++){var p=t.rows[g].elements;b.geocode({address:n[g]},c());for(var h=0;h<p.length;h++)b.geocode({address:o[h]},c())}}})),this.interval=setInterval(()=>{this.changeMarkerPosition(h,l)},12e3)}ionViewDidLeave(){console.log("leaae"),clearInterval(this.interval)}getCurrency(){return this.util.getCurrecySymbol()}}return t.\u0275fac=function(e){return new(e||t)(s.Lb(a.a),s.Lb(d.a),s.Lb(l.a),s.Lb(c.a))},t.\u0275cmp=s.Fb({type:t,selectors:[["app-tracker"]],viewQuery:function(t,e){var n;1&t&&s.mc(p,!0),2&t&&s.hc(n=s.Xb())&&(e.mapElement=n.first)},decls:31,vars:16,consts:[["slot","start"],["text","","mode","md"],[1,"main_content_div"],[1,"upper_div"],["id","map",1,"map"],["map",""],[1,"lower_div"],[1,"head_lbl"],[1,"driver_detail_div"],[1,"back_image"],[2,"padding-left","20px"],[1,"boy_name"],[1,"address"],[1,"order_detail"],[2,"color","var(--ion-color-primary)","position","absolute","right","20px"],[1,"order_status"]],template:function(t,e){1&t&&(s.Ob(0,"ion-header"),s.Ob(1,"ion-toolbar"),s.Ob(2,"ion-buttons",0),s.Mb(3,"ion-back-button",1),s.Nb(),s.Nb(),s.Nb(),s.Ob(4,"ion-content"),s.Ob(5,"div",2),s.Ob(6,"div",3),s.Mb(7,"div",4,5),s.Nb(),s.Ob(9,"div",6),s.Ob(10,"ion-label",7),s.pc(11),s.Zb(12,"translate"),s.Nb(),s.Ob(13,"div",8),s.Mb(14,"div",9),s.Ob(15,"div",10),s.Ob(16,"ion-label",11),s.pc(17),s.Nb(),s.Ob(18,"ion-label",12),s.pc(19),s.Nb(),s.pc(20,"> "),s.Nb(),s.Nb(),s.Ob(21,"ion-label",13),s.pc(22),s.Zb(23,"translate"),s.Ob(24,"span",14),s.pc(25),s.Nb(),s.Nb(),s.Ob(26,"ion-label",13),s.pc(27),s.Zb(28,"translate"),s.Ob(29,"span",15),s.pc(30,"Pago al Repartidor"),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Nb()),2&t&&(s.Ab(11),s.qc(s.ac(12,10,"Order on the Way")),s.Ab(3),s.nc("background-image","url("+e.dCover+")",s.Eb),s.Ab(3),s.qc(e.dName),s.Ab(2),s.qc(e.restAddress),s.Ab(3),s.sc("",e.totalOrders.length," ",s.ac(23,12,"Items to deliver"),""),s.Ab(3),s.sc("",e.grandTotal,"",e.getCurrency(),""),s.Ab(2),s.qc(s.ac(28,14,"Order Status")))},directives:[r.k,r.C,r.g,r.d,r.e,r.i,r.o],pipes:[g.c],styles:[".main_content_div[_ngcontent-%COMP%]{width:100%;height:100vh;display:flex;flex-direction:column;justify-content:space-between}.main_content_div[_ngcontent-%COMP%]   .upper_div[_ngcontent-%COMP%]{height:60vh}.main_content_div[_ngcontent-%COMP%]   .upper_div[_ngcontent-%COMP%]   #map[_ngcontent-%COMP%]{width:100%;height:100%}.main_content_div[_ngcontent-%COMP%]   .lower_div[_ngcontent-%COMP%]{height:40vh;padding:20px}.main_content_div[_ngcontent-%COMP%]   .lower_div[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{display:block}.main_content_div[_ngcontent-%COMP%]   .lower_div[_ngcontent-%COMP%]   .head_lbl[_ngcontent-%COMP%]{font-weight:600;font-size:20px;margin-top:10px}.main_content_div[_ngcontent-%COMP%]   .lower_div[_ngcontent-%COMP%]   .driver_detail_div[_ngcontent-%COMP%]{margin-top:20px;display:flex;flex-direction:row;align-items:center;position:relative}.main_content_div[_ngcontent-%COMP%]   .lower_div[_ngcontent-%COMP%]   .driver_detail_div[_ngcontent-%COMP%]   .back_image[_ngcontent-%COMP%]{height:50px!important;width:50px!important;border-radius:100%;background-position:50%;background-size:cover;background-repeat:no-repeat;min-width:50px}.main_content_div[_ngcontent-%COMP%]   .lower_div[_ngcontent-%COMP%]   .driver_detail_div[_ngcontent-%COMP%]   .boy_name[_ngcontent-%COMP%]{font-weight:600}.main_content_div[_ngcontent-%COMP%]   .lower_div[_ngcontent-%COMP%]   .driver_detail_div[_ngcontent-%COMP%]   .address[_ngcontent-%COMP%]{color:grey;width:80%}.main_content_div[_ngcontent-%COMP%]   .lower_div[_ngcontent-%COMP%]   .driver_detail_div[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{position:absolute;right:-3px;top:-5px;--border-radius:3px;font-weight:600}.main_content_div[_ngcontent-%COMP%]   .lower_div[_ngcontent-%COMP%]   .order_detail[_ngcontent-%COMP%]{font-weight:700;margin-top:20px}.main_content_div[_ngcontent-%COMP%]   .lower_div[_ngcontent-%COMP%]   .order_status[_ngcontent-%COMP%]{background:var(--ion-color-primary);position:absolute;right:20px;color:#fff;padding:3px 8px;border-radius:3px}"]}),t})()}];let _=(()=>{class t{}return t.\u0275mod=s.Jb({type:t}),t.\u0275inj=s.Ib({factory:function(e){return new(e||t)},imports:[[a.i.forChild(h)],a.i]}),t})();var b=n("PCNd");let m=(()=>{class t{}return t.\u0275mod=s.Jb({type:t}),t.\u0275inj=s.Ib({factory:function(e){return new(e||t)},imports:[[o.b,i.a,r.D,b.a,_]]}),t})()}}]);