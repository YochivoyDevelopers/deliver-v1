function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[17,20,21],{PCNd:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var o=n("sYmb"),i=n("ofXK"),r=n("fXoL"),a=function(){var e=_createClass((function e(){_classCallCheck(this,e)}));return e.\u0275mod=r.Jb({type:e}),e.\u0275inj=r.Ib({factory:function(t){return new(t||e)},imports:[[i.b],o.b]}),e}()},akYc:function(e,t,n){"use strict";n.r(t),n.d(t,"TrackerPageModule",(function(){return f}));var o,i,r,a=n("ofXK"),s=n("3Pt+"),l=n("TEn/"),d=n("tyNb"),c=n("fXoL"),g=n("H+bZ"),p=n("S/Aq"),u=n("2Rin"),_=n("sYmb"),b=["map"],v=[{path:"",component:(o=function(){return _createClass((function e(t,n,o,i){_classCallCheck(this,e),this.route=t,this.api=n,this.adb=o,this.util=i,this.latOri="",this.longOri="",this.latDest="",this.longDest="",this.id="",this.dName="",this.restAddress="",this.dCover="",this.phone="",this.status="",this.totalOrders=[]}),[{key:"ngOnInit",value:function(){var e=this;this.route.queryParams.subscribe((function(t){console.log("data=>",t),t.hasOwnProperty("id")&&(e.id=t.id,e.getOrder())}))}},{key:"callDriver",value:function(){window.open("https://api.whatsapp.com/send?phone=91"+this.phone)}},{key:"getOrder",value:function(){var e=this;this.util.show(),this.api.getOrderById(this.id).then((function(t){e.util.hide(),console.log(t),t&&(e.dName=t.dId.fullname,e.dCover=t.uid.coverImage,e.dId=t.dId.uid,e.restAddress=t.address.address,e.phone=t.dId.phone,e.status=t.status,e.grandTotal=t.grandTotal,e.totalOrders=JSON.parse(t.order),console.log("my order",e.totalOrders),e.loadMap(parseFloat(t.address.lat),parseFloat(t.address.lng),parseFloat(t.vid.lat),parseFloat(t.vid.lng)))}),(function(t){console.log("error in orders",t),e.util.hide(),e.util.errorToast(e.util.translate("Something went wrong"))})).catch((function(t){console.log("error in order",t),e.util.hide(),e.util.errorToast(e.util.translate("Something went wrong"))}))}},{key:"changeMarkerPosition",value:function(e,t){var n=new google.maps.LatLng(this.driverLat,this.driverLng);t.setCenter(n),e.setPosition(n),console.log("Updating runner position")}},{key:"loadMap",value:function(e,t,n,o){var i=this,r=new google.maps.DirectionsService,a=new google.maps.DirectionsRenderer;a=new google.maps.DirectionsRenderer;var s=new google.maps.LatLngBounds,l={lat:parseFloat(e),lng:parseFloat(t)},d={lat:n,lng:o},c=new google.maps.Map(this.mapElement.nativeElement,{center:{lat:e,lng:t},disableDefaultUI:!0,zoom:10}),g=new google.maps.LatLng(e,t),p=new google.maps.LatLng(n,o),u={url:"assets/icon.png",scaledSize:new google.maps.Size(50,50),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,0)},_=new google.maps.Marker({map:c,position:g,animation:google.maps.Animation.DROP,icon:u}),b=new google.maps.Marker({map:c,position:p,animation:google.maps.Animation.DROP});_.setMap(c),b.setMap(c),a.setMap(c),a.setOptions({polylineOptions:{strokeWeight:4,strokeOpacity:1,strokeColor:"red"},suppressMarkers:!0});var v=new google.maps.Geocoder;(new google.maps.DistanceMatrixService).getDistanceMatrix({origins:[l],destinations:[d],travelMode:"DRIVING",unitSystem:google.maps.UnitSystem.METRIC,avoidHighways:!1,avoidTolls:!1},(function(e,t){if("OK"!==t)alert("Error was: "+t);else{var n=e.originAddresses,o=e.destinationAddresses,i=(document.getElementById("output"),function(e){return function(e,t){"OK"===t?c.fitBounds(s.extend(e[0].geometry.location)):alert("Geocode was not successful due to: "+t)}});r.route({origin:l,destination:d,travelMode:"DRIVING"},(function(e,t){"OK"===t?a.setDirections(e):window.alert("Directions request failed due to "+t)}));for(var g=0;g<n.length;g++){var p=e.rows[g].elements;v.geocode({address:n[g]},i());for(var u=0;u<p.length;u++)v.geocode({address:o[u]},i())}}})),this.interval=setInterval((function(){i.changeMarkerPosition(_,c)}),12e3)}},{key:"ionViewDidLeave",value:function(){console.log("leaae"),clearInterval(this.interval)}},{key:"getCurrency",value:function(){return this.util.getCurrecySymbol()}}])}(),o.\u0275fac=function(e){return new(e||o)(c.Lb(d.a),c.Lb(g.a),c.Lb(p.a),c.Lb(u.a))},o.\u0275cmp=c.Fb({type:o,selectors:[["app-tracker"]],viewQuery:function(e,t){var n;1&e&&c.mc(b,!0),2&e&&c.hc(n=c.Xb())&&(t.mapElement=n.first)},decls:31,vars:16,consts:[["slot","start"],["text","","mode","md"],[1,"main_content_div"],[1,"upper_div"],["id","map",1,"map"],["map",""],[1,"lower_div"],[1,"head_lbl"],[1,"driver_detail_div"],[1,"back_image"],[2,"padding-left","20px"],[1,"boy_name"],[1,"address"],[1,"order_detail"],[2,"color","var(--ion-color-primary)","position","absolute","right","20px"],[1,"order_status"]],template:function(e,t){1&e&&(c.Ob(0,"ion-header"),c.Ob(1,"ion-toolbar"),c.Ob(2,"ion-buttons",0),c.Mb(3,"ion-back-button",1),c.Nb(),c.Nb(),c.Nb(),c.Ob(4,"ion-content"),c.Ob(5,"div",2),c.Ob(6,"div",3),c.Mb(7,"div",4,5),c.Nb(),c.Ob(9,"div",6),c.Ob(10,"ion-label",7),c.pc(11),c.Zb(12,"translate"),c.Nb(),c.Ob(13,"div",8),c.Mb(14,"div",9),c.Ob(15,"div",10),c.Ob(16,"ion-label",11),c.pc(17),c.Nb(),c.Ob(18,"ion-label",12),c.pc(19),c.Nb(),c.pc(20,"> "),c.Nb(),c.Nb(),c.Ob(21,"ion-label",13),c.pc(22),c.Zb(23,"translate"),c.Ob(24,"span",14),c.pc(25),c.Nb(),c.Nb(),c.Ob(26,"ion-label",13),c.pc(27),c.Zb(28,"translate"),c.Ob(29,"span",15),c.pc(30,"Pago al Repartidor"),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Nb()),2&e&&(c.Ab(11),c.qc(c.ac(12,10,"Order on the Way")),c.Ab(3),c.nc("background-image","url("+t.dCover+")",c.Eb),c.Ab(3),c.qc(t.dName),c.Ab(2),c.qc(t.restAddress),c.Ab(3),c.sc("",t.totalOrders.length," ",c.ac(23,12,"Items to deliver"),""),c.Ab(3),c.sc("",t.grandTotal,"",t.getCurrency(),""),c.Ab(2),c.qc(c.ac(28,14,"Order Status")))},directives:[l.k,l.C,l.g,l.d,l.e,l.i,l.o],pipes:[_.c],styles:[".main_content_div[_ngcontent-%COMP%]{width:100%;height:100vh;display:flex;flex-direction:column;justify-content:space-between}.main_content_div[_ngcontent-%COMP%]   .upper_div[_ngcontent-%COMP%]{height:60vh}.main_content_div[_ngcontent-%COMP%]   .upper_div[_ngcontent-%COMP%]   #map[_ngcontent-%COMP%]{width:100%;height:100%}.main_content_div[_ngcontent-%COMP%]   .lower_div[_ngcontent-%COMP%]{height:40vh;padding:20px}.main_content_div[_ngcontent-%COMP%]   .lower_div[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{display:block}.main_content_div[_ngcontent-%COMP%]   .lower_div[_ngcontent-%COMP%]   .head_lbl[_ngcontent-%COMP%]{font-weight:600;font-size:20px;margin-top:10px}.main_content_div[_ngcontent-%COMP%]   .lower_div[_ngcontent-%COMP%]   .driver_detail_div[_ngcontent-%COMP%]{margin-top:20px;display:flex;flex-direction:row;align-items:center;position:relative}.main_content_div[_ngcontent-%COMP%]   .lower_div[_ngcontent-%COMP%]   .driver_detail_div[_ngcontent-%COMP%]   .back_image[_ngcontent-%COMP%]{height:50px!important;width:50px!important;border-radius:100%;background-position:50%;background-size:cover;background-repeat:no-repeat;min-width:50px}.main_content_div[_ngcontent-%COMP%]   .lower_div[_ngcontent-%COMP%]   .driver_detail_div[_ngcontent-%COMP%]   .boy_name[_ngcontent-%COMP%]{font-weight:600}.main_content_div[_ngcontent-%COMP%]   .lower_div[_ngcontent-%COMP%]   .driver_detail_div[_ngcontent-%COMP%]   .address[_ngcontent-%COMP%]{color:grey;width:80%}.main_content_div[_ngcontent-%COMP%]   .lower_div[_ngcontent-%COMP%]   .driver_detail_div[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{position:absolute;right:-3px;top:-5px;--border-radius:3px;font-weight:600}.main_content_div[_ngcontent-%COMP%]   .lower_div[_ngcontent-%COMP%]   .order_detail[_ngcontent-%COMP%]{font-weight:700;margin-top:20px}.main_content_div[_ngcontent-%COMP%]   .lower_div[_ngcontent-%COMP%]   .order_status[_ngcontent-%COMP%]{background:var(--ion-color-primary);position:absolute;right:20px;color:#fff;padding:3px 8px;border-radius:3px}"]}),o)}],m=((i=_createClass((function e(){_classCallCheck(this,e)}))).\u0275mod=c.Jb({type:i}),i.\u0275inj=c.Ib({factory:function(e){return new(e||i)},imports:[[d.i.forChild(v)],d.i]}),i),h=n("PCNd"),f=((r=_createClass((function e(){_classCallCheck(this,e)}))).\u0275mod=c.Jb({type:r}),r.\u0275inj=c.Ib({factory:function(e){return new(e||r)},imports:[[a.b,s.a,l.D,h.a,m]]}),r)}}]);