(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{F4UR:function(t,n,o){"use strict";o.r(n),o.d(n,"LoginPageModule",(function(){return C}));var e=o("ofXK"),i=o("3Pt+"),a=o("TEn/"),r=o("tyNb"),l=o("PSD3"),s=o.n(l),c=o("fXoL"),g=o("H+bZ"),d=o("2Rin"),b=o("sYmb"),p=o("wljF");function u(t,n){1&t&&(c.Ob(0,"span"),c.pc(1),c.Zb(2,"translate"),c.Nb()),2&t&&(c.Ab(1),c.rc(" ",c.ac(2,1,"Log In"),""))}function m(t,n){1&t&&c.Mb(0,"ion-spinner",21)}const h=[{path:"",component:(()=>{class t{constructor(t,n,o,e,i,a){this.router=t,this.api=n,this.util=o,this.navCtrl=e,this.translate=i,this.oneSignal=a,this.login={email:"",password:""},this.submitted=!1,this.isLogin=!1;const r=localStorage.getItem("language");r&&null!==r||localStorage.setItem("language","spanish"),this.oneSignal.getIds().then(t=>{console.log("iddddd",t),localStorage.setItem("fcm",t.userId)}),this.translate.use(localStorage.getItem("language"))}ngOnInit(){}onLogin(t){if(console.log("form",t),this.submitted=!0,t.valid){if(!/^[\w._-]+[+]?[\w._-]+@[\w.-]+\.[a-zA-Z]{2,6}$/.test(this.login.email))return this.util.showToast(this.util.translate("Please enter valid email"),"danger","bottom"),!1;console.log("login"),this.isLogin=!0,this.api.login(this.login.email,this.login.password).then(t=>{console.log(t),t&&t.uid&&this.api.getProfile(t.uid).then(n=>{if(console.log("data",n),this.isLogin=!1,n&&"delivery"===n.type)if(n&&"active"===n.status){localStorage.setItem("uid",t.uid),localStorage.setItem("help",t.uid);const n=localStorage.getItem("lat"),o=localStorage.getItem("lng");console.log("can update");const e={lat:n,lng:o,isActive:!0};this.api.updateProfile(localStorage.getItem("uid"),e).then(t=>{console.log(t)}).catch(t=>{console.log(t)}),this.navCtrl.navigateRoot(["/tabs"])}else s.a.fire({title:this.util.translate("Error"),text:this.util.translate("Your are blocked please contact administrator"),icon:"error",showConfirmButton:!0,showCancelButton:!0,confirmButtonText:this.util.translate("Need Help?"),backdrop:!1,background:"white"}).then(n=>{n&&n.value&&(localStorage.setItem("help",t.uid),this.router.navigate(["inbox"]))});else this.util.showToast(this.util.translate("your not valid user"),"danger","bottom")}).catch(t=>{this.isLogin=!1,console.log(t),this.util.showToast(""+t,"danger","bottom")})}).catch(t=>{this.isLogin=!1,t&&(console.log(t),this.util.showToast(this.util.translate("Incorrect password. Verify your password"),"danger","bottom"))})}}resetPass(){this.router.navigate(["/forgot-password"])}register(){this.router.navigate(["register"])}getClassName(){return localStorage.getItem("language")}changeLng(t){localStorage.setItem("language",t),this.translate.use(t)}}return t.\u0275fac=function(n){return new(n||t)(c.Lb(r.g),c.Lb(g.a),c.Lb(d.a),c.Lb(a.G),c.Lb(b.d),c.Lb(p.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-login"]],decls:40,vars:31,consts:[[1,"ion-padding"],[1,"formContain"],[1,"login-logo"],["src","assets/imgs/icon.png","alt","foodies",1,"logo_icon"],[1,"login-name"],[1,"subTitle"],["novalidate","",1,"formAuth"],["loginForm","ngForm"],["lines","none"],["lines","none",1,"inputsAuth"],["for","email"],["type","email","name","email","spellcheck","false","autocapitalize","off","required","",3,"ngModel","placeholder","ngModelChange"],["email","ngModel"],["color","danger"],[1,"ion-padding-start",3,"hidden"],["name","password","type","password","required","",3,"ngModel","placeholder","ngModelChange"],["password","ngModel"],[1,"frgTag",3,"click"],["type","submit","expand","block",1,"btns",2,"--border-radius","30px","--padding-top","15px","--padding-bottom","15px",3,"disabled","click"],[4,"ngIf"],["name","circles",4,"ngIf"],["name","circles"]],template:function(t,n){if(1&t){const t=c.Pb();c.Ob(0,"ion-content",0),c.Ob(1,"div",1),c.Ob(2,"div",2),c.Mb(3,"img",3),c.Ob(4,"p",4),c.pc(5),c.Zb(6,"translate"),c.Nb(),c.Ob(7,"p",5),c.pc(8),c.Zb(9,"translate"),c.Mb(10,"br"),c.pc(11),c.Zb(12,"translate"),c.Nb(),c.Nb(),c.Ob(13,"form",6,7),c.Ob(15,"ion-list",8),c.Ob(16,"ion-item",9),c.Ob(17,"label",10),c.pc(18,"Email:"),c.Nb(),c.Ob(19,"ion-input",11,12),c.Wb("ngModelChange",(function(t){return n.login.email=t})),c.Zb(21,"translate"),c.Nb(),c.Nb(),c.Ob(22,"ion-text",13),c.Ob(23,"p",14),c.pc(24),c.Zb(25,"translate"),c.Nb(),c.Nb(),c.Ob(26,"ion-item",9),c.Ob(27,"ion-input",15,16),c.Wb("ngModelChange",(function(t){return n.login.password=t})),c.Zb(29,"translate"),c.Nb(),c.Nb(),c.Ob(30,"ion-text",13),c.Ob(31,"p",14),c.pc(32),c.Zb(33,"translate"),c.Nb(),c.Nb(),c.Nb(),c.Ob(34,"p",17),c.Wb("click",(function(){return n.resetPass()})),c.pc(35),c.Zb(36,"translate"),c.Nb(),c.Ob(37,"ion-button",18),c.Wb("click",(function(){c.jc(t);const o=c.ic(14);return n.onLogin(o)})),c.oc(38,u,3,3,"span",19),c.oc(39,m,1,0,"ion-spinner",20),c.Nb(),c.Nb(),c.Nb(),c.Nb()}if(2&t){const t=c.ic(20),o=c.ic(28);c.Ab(5),c.qc(c.ac(6,15,"Login")),c.Ab(3),c.rc(" ",c.ac(9,17,"Enter your login detail to")," "),c.Ab(3),c.rc(" ",c.ac(12,19,"access your account")," "),c.Ab(8),c.dc("ngModel",n.login.email)("placeholder",c.ac(21,21,"Email")),c.Ab(4),c.dc("hidden",t.valid||0==n.submitted),c.Ab(1),c.rc(" ",c.ac(25,23,"Email is required")," "),c.Ab(3),c.dc("ngModel",n.login.password)("placeholder",c.ac(29,25,"Password")),c.Ab(4),c.dc("hidden",o.valid||0==n.submitted),c.Ab(1),c.rc(" ",c.ac(33,27,"Password is required")," "),c.Ab(3),c.rc(" ",c.ac(36,29,"Forgot Password?")," "),c.Ab(2),c.dc("disabled",n.isLogin),c.Ab(1),c.dc("ngIf",!n.isLogin),c.Ab(1),c.dc("ngIf",n.isLogin)}},directives:[a.i,i.i,i.e,i.f,a.p,a.n,a.m,a.J,i.h,i.d,i.g,a.z,a.f,e.j,a.v],pipes:[b.c],styles:[".login-logo[_ngcontent-%COMP%]{text-align:center;right:0;left:0;margin:30% auto 20px}.login-logo[_ngcontent-%COMP%]   .logo_icon[_ngcontent-%COMP%]{width:110px!important}.login-logo[_ngcontent-%COMP%]   .login-name[_ngcontent-%COMP%]{margin:0;font-size:1.5rem}.login-logo[_ngcontent-%COMP%]   .subTitle[_ngcontent-%COMP%]{font-size:1rem;margin:10px 0 0}.frgTag[_ngcontent-%COMP%]{margin-top:-10px;margin-bottom:25px;font-size:15px;text-align:right;color:var(--ion-color-primary)}.login-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:150px}.list[_ngcontent-%COMP%]{margin-bottom:0}ion-item[_ngcontent-%COMP%]{--ion-background-color:#f3f3f3;border-radius:5px!important;margin-top:10px}.formContain[_ngcontent-%COMP%], .inputsAuth[_ngcontent-%COMP%]{display:flex;flex-direction:column}.formContain[_ngcontent-%COMP%]{width:50vh;margin:0 auto;justify-content:center;align-items:center}.formAuth[_ngcontent-%COMP%]{width:100%}.formContain[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-top:1rem;color:var(--text-color2);margin-bottom:2rem}.inputsAuth[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;padding:10px;border-bottom:1px solid var(--text-color2)}.inputsAuth[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--text-color2);display:none}.formAuth[_ngcontent-%COMP%]{display:flex;width:1005;flex-direction:column;gap:1rem}.deFlexInputs[_ngcontent-%COMP%]{display:flex;border:none;padding:10px 0;gap:10px;border-bottom:1px solid var(--text-color2)}.deFlexInputs[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border:none}.deFlexInputs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background-color:transparent;color:var(--text-color2);cursor:pointer}.btns[_ngcontent-%COMP%]{padding:15px 0;border:none;border-radius:100rem!important;color:#fff;width:100%;font-size:16px;height:auto;line-height:1.5}@media (max-width:500px){.formContain[_ngcontent-%COMP%]{width:100%}}"]}),t})()}];let f=(()=>{class t{}return t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({factory:function(n){return new(n||t)},imports:[[r.i.forChild(h)],r.i]}),t})();var O=o("PCNd");let C=(()=>{class t{}return t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({factory:function(n){return new(n||t)},imports:[[e.b,i.a,a.D,f,O.a]]}),t})()}}]);