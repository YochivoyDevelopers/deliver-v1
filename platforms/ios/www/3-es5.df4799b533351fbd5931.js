function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,_toPropertyKey(o.key),o)}}function _createClass(t,n,e){return n&&_defineProperties(t.prototype,n),e&&_defineProperties(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var n=_toPrimitive(t,"string");return"symbol"==typeof n?n:n+""}function _toPrimitive(t,n){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,n||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"+duN":function(t,n,e){"use strict";e.r(n),e.d(n,"InboxPageModule",(function(){return C}));var o=e("ofXK"),i=e("3Pt+"),c=e("TEn/"),r=e("tyNb"),s=e("fXoL"),a=e("CqG3"),l=e("H+bZ"),d=e("sYmb"),g=["scrollMe"],_=["messages"];function f(t,n){if(1&t&&(s.Ob(0,"div",13),s.Ob(1,"div",14),s.Ob(2,"div",15),s.pc(3),s.Nb(),s.Nb(),s.Mb(4,"div",16),s.Nb()),2&t){var e=s.Yb().$implicit;s.Ab(3),s.rc(" ",e.msg," ")}}function b(t,n){if(1&t&&(s.Ob(0,"div",17),s.Ob(1,"div",14),s.Ob(2,"div",15),s.pc(3),s.Nb(),s.Nb(),s.Mb(4,"div",18),s.Nb()),2&t){var e=s.Yb().$implicit;s.Ab(3),s.rc(" ",e.msg," ")}}function p(t,n){if(1&t&&(s.Ob(0,"span"),s.oc(1,f,5,1,"div",11),s.oc(2,b,5,1,"div",12),s.Nb()),2&t){var e=n.$implicit;s.Ab(1),s.dc("ngIf","user"==e.from),s.Ab(1),s.dc("ngIf","admin"==e.from)}}var m,u,h,v=[{path:"",component:(m=function(){return _createClass((function t(n,e){var o=this;_classCallCheck(this,t),this.adb=n,this.api=e,this.messages=[],this.count=0,this.id="admin"+localStorage.getItem("help"),this.getMessages(),this.adb.collection("users").doc(localStorage.getItem("help")).snapshotChanges().subscribe((function(t){o.api.getProfile(localStorage.getItem("help")).then((function(t){console.log(t),o.count=t&&t.count?t.count:0})).catch((function(t){console.log(t)}))}))}),[{key:"getMessages",value:function(){var t=this;this.adb.collection("messages").doc(this.id).collection("chats").snapshotChanges().subscribe((function(n){console.log(n),t.api.getMessages(t.id).then((function(n){console.log(n),n.sort((function(t,n){return new Date(t.timestamp).getTime()-new Date(n.timestamp).getTime()})),t.messages=n,console.log("info",t.messages),t.scrollToBottomOnInit()})).catch((function(t){console.log(t)}))}),(function(t){console.log(t)}))}},{key:"ngOnInit",value:function(){}},{key:"send",value:function(){if(console.log("this.mess",this.message),this.message&&this.id){var t=this.message;this.message="",console.log("send");var n=Math.floor(1e8+9e8*Math.random()),e={msg:t,from:"user",timestamp:(new Date).toISOString(),id:this.id,docId:n};this.adb.collection("messages").doc(this.id).collection("chats").doc(n.toString()).set(e).then((function(t){console.log("sent",t)})).catch((function(t){console.log(t)}));var o={count:this.count+1};this.api.updateProfile(localStorage.getItem("help"),o).then((function(t){console.log("updated",t)})).catch((function(t){console.log(t)}))}}},{key:"scrollToBottomOnInit",value:function(){try{this.myScrollContainer.nativeElement.scrollTop=this.myScrollContainer.nativeElement.scrollHeight}catch(t){}}}])}(),m.\u0275fac=function(t){return new(t||m)(s.Lb(a.AngularFirestore),s.Lb(l.a))},m.\u0275cmp=s.Fb({type:m,selectors:[["app-inbox"]],viewQuery:function(t,n){var e;1&t&&(s.uc(g,!0),s.uc(_,!0)),2&t&&(s.hc(e=s.Xb())&&(n.myScrollContainer=e.first),s.hc(e=s.Xb())&&(n.messagesList=e))},decls:18,vars:9,consts:[["color","custom-red",1,"custom-toolbar"],["slot","start"],["color","light",1,"custom-tittle"],[1,"separador"],[1,"main_content_div"],[1,"lower_div",3,"scrollTop"],["scrollMe",""],[4,"ngFor","ngForOf"],[1,"footer_div"],["type","text",3,"ngModel","placeholder","ngModelChange"],["name","send-sharp",1,"send_btn",3,"click"],["class","main_div_right",4,"ngIf"],["class","main_div_left",4,"ngIf"],[1,"main_div_right"],[1,"msg_div"],[1,"inner_msg"],[1,"tri_right"],[1,"main_div_left"],[1,"tri_left"]],template:function(t,n){if(1&t&&(s.Ob(0,"ion-toolbar",0),s.Ob(1,"ion-buttons",1),s.Mb(2,"ion-back-button"),s.Nb(),s.Ob(3,"ion-title",2),s.pc(4),s.Zb(5,"translate"),s.Nb(),s.Nb(),s.Ob(6,"ion-content"),s.Ob(7,"div",3),s.Ob(8,"div",4),s.Ob(9,"div",5,6),s.oc(11,p,3,2,"span",7),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Ob(12,"ion-footer"),s.Ob(13,"ion-toolbar"),s.Ob(14,"div",8),s.Ob(15,"ion-input",9),s.Wb("ngModelChange",(function(t){return n.message=t})),s.Zb(16,"translate"),s.Nb(),s.Ob(17,"ion-icon",10),s.Wb("click",(function(){return n.send()})),s.Nb(),s.Nb(),s.Nb(),s.Nb()),2&t){var e=s.ic(10);s.Ab(4),s.qc(s.ac(5,5,"Support")),s.Ab(5),s.dc("scrollTop",e.scrollHeight),s.Ab(2),s.dc("ngForOf",n.messages),s.Ab(4),s.ec("placeholder",s.ac(16,7,"Type a message...")),s.dc("ngModel",n.message)}},directives:[c.C,c.g,c.d,c.e,c.B,c.i,o.i,c.j,c.m,c.J,i.d,i.g,c.l,o.j],pipes:[d.c],styles:['ion-header[_ngcontent-%COMP%]{box-shadow:none}.custom-toolbar[_ngcontent-%COMP%]{border-radius:0 0 0 30px;background:red;color:#fff;clip-path:path("M 0 0 H 100% V calc(100% - 30px) Q 50% 100% 0 calc(100% - 30px) Z")}.custom-title[_ngcontent-%COMP%]{text-align:center;font-size:1.5rem;font-weight:700;text-transform:uppercase}.separador[_ngcontent-%COMP%]{background-color:red;height:30px}.main_content_div[_ngcontent-%COMP%]{padding-top:10px;border-radius:0 30px 0 0;width:100%;background:#fff;position:relative}.main_content_div[_ngcontent-%COMP%]   .lower_div[_ngcontent-%COMP%]{padding:0 20px}.main_content_div[_ngcontent-%COMP%]   .lower_div[_ngcontent-%COMP%]   .main_div_right[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:flex-end;position:relative}.main_content_div[_ngcontent-%COMP%]   .lower_div[_ngcontent-%COMP%]   .main_div_right[_ngcontent-%COMP%]   .msg_div[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;width:80%;margin-bottom:15px}.main_content_div[_ngcontent-%COMP%]   .lower_div[_ngcontent-%COMP%]   .main_div_right[_ngcontent-%COMP%]   .msg_div[_ngcontent-%COMP%]   .inner_msg[_ngcontent-%COMP%]{background-color:#f0eff5;padding:10px;border-radius:5px}.main_content_div[_ngcontent-%COMP%]   .lower_div[_ngcontent-%COMP%]   .main_div_right[_ngcontent-%COMP%]   .tri_right[_ngcontent-%COMP%]{width:0;height:0;position:absolute;border-top:10px solid #f0eff5;border-left:10px solid transparent;bottom:10px}.main_content_div[_ngcontent-%COMP%]   .lower_div[_ngcontent-%COMP%]   .main_div_left[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:flex-start;position:relative}.main_content_div[_ngcontent-%COMP%]   .lower_div[_ngcontent-%COMP%]   .main_div_left[_ngcontent-%COMP%]   .msg_div[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;width:80%;margin-bottom:15px}.main_content_div[_ngcontent-%COMP%]   .lower_div[_ngcontent-%COMP%]   .main_div_left[_ngcontent-%COMP%]   .msg_div[_ngcontent-%COMP%]   .inner_msg[_ngcontent-%COMP%]{background-color:var(--ion-color-red-msj);padding:10px;border-radius:5px;color:#fff}.main_content_div[_ngcontent-%COMP%]   .lower_div[_ngcontent-%COMP%]   .main_div_left[_ngcontent-%COMP%]   .tri_left[_ngcontent-%COMP%]{width:0;height:0;position:absolute;border-top:10px solid var(--ion-color-main2);border-right:10px solid transparent;bottom:10px}.footer_div[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;padding:20px}.footer_div[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background:#fdfdfd}.footer_div[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{border:1px solid #d3d3d3;border-radius:5px;--padding-start:8px;height:20px;height:35px}.footer_div[_ngcontent-%COMP%]   .send_btn[_ngcontent-%COMP%]{font-size:20px;color:var(--ion-color-main2);margin-left:10px}']}),m)}],O=((h=_createClass((function t(){_classCallCheck(this,t)}))).\u0275mod=s.Jb({type:h}),h.\u0275inj=s.Ib({factory:function(t){return new(t||h)},imports:[[r.i.forChild(v)],r.i]}),h),C=((u=_createClass((function t(){_classCallCheck(this,t)}))).\u0275mod=s.Jb({type:u}),u.\u0275inj=s.Ib({factory:function(t){return new(t||u)},imports:[[o.b,i.a,c.D,O,d.b]]}),u)}}]);